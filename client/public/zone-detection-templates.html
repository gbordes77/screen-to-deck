<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTG Zone Detection Templates - Visual Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .controls {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        select, input, button {
            padding: 10px 15px;
            border-radius: 6px;
            border: none;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:hover, input:hover, button:hover {
            background: #fff;
            transform: translateY(-1px);
        }

        button {
            background: #4CAF50;
            color: white;
            font-weight: bold;
        }

        button:hover {
            background: #45a049;
        }

        .template-container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .template-wrapper {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
        }

        .template-image {
            width: 100%;
            height: auto;
            display: block;
        }

        .zone-overlay {
            position: absolute;
            border: 2px solid;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .zone-overlay:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.02);
        }

        /* Zone colors */
        .zone-main {
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .zone-sideboard {
            border-color: #FF9800;
            color: #FF9800;
        }

        .zone-header {
            border-color: #2196F3;
            color: #2196F3;
        }

        .zone-card {
            border-color: #9C27B0;
            color: #9C27B0;
        }

        .zone-info {
            background: rgba(0,0,0,0.9);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .zone-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .zone-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid;
        }

        .zone-item.main { border-left-color: #4CAF50; }
        .zone-item.sideboard { border-left-color: #FF9800; }
        .zone-item.header { border-left-color: #2196F3; }
        .zone-item.card { border-left-color: #9C27B0; }

        .coordinates {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        .export-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }

        .export-content {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 300px;
            overflow-y: auto;
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .controls { flex-direction: column; }
            .zone-details { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ MTG Zone Detection Templates</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="platform">Platform</label>
                <select id="platform" onchange="updateTemplate()">
                    <option value="mtga">MTG Arena</option>
                    <option value="mtgo">MTG Online</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="resolution">Resolution</label>
                <select id="resolution" onchange="updateTemplate()">
                    <option value="1920x1080">1920x1080 (Full HD)</option>
                    <option value="2560x1440">2560x1440 (2K)</option>
                    <option value="3840x2160">3840x2160 (4K)</option>
                    <option value="1280x720">1280x720 (HD)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="showGrid">Show Grid</label>
                <input type="checkbox" id="showGrid" onchange="toggleGrid()">
            </div>
            
            <div class="control-group">
                <label>&nbsp;</label>
                <button onclick="exportConfig()">Export Configuration</button>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color zone-main"></div>
                <span>Main Deck Zone</span>
            </div>
            <div class="legend-item">
                <div class="legend-color zone-sideboard"></div>
                <span>Sideboard Zone</span>
            </div>
            <div class="legend-item">
                <div class="legend-color zone-header"></div>
                <span>Header/Title Zone</span>
            </div>
            <div class="legend-item">
                <div class="legend-color zone-card"></div>
                <span>Individual Card Zone</span>
            </div>
        </div>

        <div class="template-container">
            <h2 id="template-title">MTGA Template - 1920x1080</h2>
            
            <div class="template-wrapper" id="template-wrapper">
                <!-- Dynamic content will be inserted here -->
            </div>
            
            <div class="zone-info">
                <h3>Zone Detection Information</h3>
                <div class="zone-details" id="zone-details">
                    <!-- Zone details will be populated dynamically -->
                </div>
            </div>
        </div>

        <div class="export-section">
            <h3>Configuration Export</h3>
            <button onclick="copyToClipboard()">Copy to Clipboard</button>
            <div class="export-content" id="export-content">
                <!-- JSON configuration will appear here -->
            </div>
        </div>
    </div>

    <script>
        // Zone configurations for different platforms and resolutions
        const zoneConfigs = {
            mtga: {
                '1920x1080': {
                    mainDeck: { x: 0.15, y: 0.2, width: 0.65, height: 0.55, rows: 10, cols: 7 },
                    sideboard: { x: 0.82, y: 0.2, width: 0.15, height: 0.55, rows: 15, cols: 1 },
                    header: { x: 0.15, y: 0.1, width: 0.65, height: 0.08 },
                    cardSize: { width: 0.09, height: 0.055 }
                },
                '2560x1440': {
                    mainDeck: { x: 0.15, y: 0.2, width: 0.65, height: 0.55, rows: 10, cols: 7 },
                    sideboard: { x: 0.82, y: 0.2, width: 0.15, height: 0.55, rows: 15, cols: 1 },
                    header: { x: 0.15, y: 0.1, width: 0.65, height: 0.08 },
                    cardSize: { width: 0.09, height: 0.055 }
                },
                '3840x2160': {
                    mainDeck: { x: 0.15, y: 0.2, width: 0.65, height: 0.55, rows: 10, cols: 7 },
                    sideboard: { x: 0.82, y: 0.2, width: 0.15, height: 0.55, rows: 15, cols: 1 },
                    header: { x: 0.15, y: 0.1, width: 0.65, height: 0.08 },
                    cardSize: { width: 0.09, height: 0.055 }
                },
                '1280x720': {
                    mainDeck: { x: 0.15, y: 0.2, width: 0.65, height: 0.55, rows: 10, cols: 7 },
                    sideboard: { x: 0.82, y: 0.2, width: 0.15, height: 0.55, rows: 15, cols: 1 },
                    header: { x: 0.15, y: 0.1, width: 0.65, height: 0.08 },
                    cardSize: { width: 0.09, height: 0.055 }
                }
            },
            mtgo: {
                '1920x1080': {
                    mainDeck: { x: 0.05, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    sideboard: { x: 0.52, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    deckHeader: { x: 0.05, y: 0.18, width: 0.43, height: 0.06, text: 'Deck' },
                    sideboardHeader: { x: 0.52, y: 0.18, width: 0.43, height: 0.06, text: 'Sideboard' },
                    lineHeight: 0.022,
                    columnFormat: ['quantity', 'name', 'set', 'collector']
                },
                '2560x1440': {
                    mainDeck: { x: 0.05, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    sideboard: { x: 0.52, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    deckHeader: { x: 0.05, y: 0.18, width: 0.43, height: 0.06, text: 'Deck' },
                    sideboardHeader: { x: 0.52, y: 0.18, width: 0.43, height: 0.06, text: 'Sideboard' },
                    lineHeight: 0.022,
                    columnFormat: ['quantity', 'name', 'set', 'collector']
                },
                '3840x2160': {
                    mainDeck: { x: 0.05, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    sideboard: { x: 0.52, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    deckHeader: { x: 0.05, y: 0.18, width: 0.43, height: 0.06, text: 'Deck' },
                    sideboardHeader: { x: 0.52, y: 0.18, width: 0.43, height: 0.06, text: 'Sideboard' },
                    lineHeight: 0.022,
                    columnFormat: ['quantity', 'name', 'set', 'collector']
                },
                '1280x720': {
                    mainDeck: { x: 0.05, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    sideboard: { x: 0.52, y: 0.25, width: 0.43, height: 0.65, type: 'list' },
                    deckHeader: { x: 0.05, y: 0.18, width: 0.43, height: 0.06, text: 'Deck' },
                    sideboardHeader: { x: 0.52, y: 0.18, width: 0.43, height: 0.06, text: 'Sideboard' },
                    lineHeight: 0.022,
                    columnFormat: ['quantity', 'name', 'set', 'collector']
                }
            }
        };

        let currentConfig = null;
        let showGrid = false;

        function updateTemplate() {
            const platform = document.getElementById('platform').value;
            const resolution = document.getElementById('resolution').value;
            const config = zoneConfigs[platform][resolution];
            currentConfig = { platform, resolution, ...config };
            
            document.getElementById('template-title').textContent = 
                `${platform.toUpperCase()} Template - ${resolution}`;
            
            renderTemplate(platform, resolution, config);
            updateZoneDetails(platform, config);
            updateExportContent();
        }

        function renderTemplate(platform, resolution, config) {
            const wrapper = document.getElementById('template-wrapper');
            const [width, height] = resolution.split('x').map(Number);
            const aspectRatio = height / width;
            
            wrapper.style.paddingTop = `${aspectRatio * 100}%`;
            wrapper.innerHTML = '';
            
            if (platform === 'mtga') {
                renderMTGATemplate(wrapper, config);
            } else {
                renderMTGOTemplate(wrapper, config);
            }
            
            if (showGrid) {
                addGrid(wrapper);
            }
        }

        function renderMTGATemplate(wrapper, config) {
            // Create mock MTGA interface background
            const bg = document.createElement('div');
            bg.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(180deg, #2c1810 0%, #1a0f08 100%);
            `;
            wrapper.appendChild(bg);
            
            // Add zones
            addZone(wrapper, 'Header', config.header, 'zone-header');
            addZone(wrapper, 'Main Deck', config.mainDeck, 'zone-main');
            addZone(wrapper, 'Sideboard', config.sideboard, 'zone-sideboard');
            
            // Add individual card zones in main deck
            if (config.mainDeck.rows && config.mainDeck.cols) {
                for (let row = 0; row < Math.min(3, config.mainDeck.rows); row++) {
                    for (let col = 0; col < Math.min(3, config.mainDeck.cols); col++) {
                        const cardX = config.mainDeck.x + (col * config.cardSize.width);
                        const cardY = config.mainDeck.y + (row * config.cardSize.height * 2);
                        addZone(wrapper, '', {
                            x: cardX,
                            y: cardY,
                            width: config.cardSize.width * 0.9,
                            height: config.cardSize.height * 1.8
                        }, 'zone-card', true);
                    }
                }
            }
        }

        function renderMTGOTemplate(wrapper, config) {
            // Create mock MTGO interface background
            const bg = document.createElement('div');
            bg.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #f5f5f5;
            `;
            wrapper.appendChild(bg);
            
            // Add zones
            addZone(wrapper, config.deckHeader.text, config.deckHeader, 'zone-header');
            addZone(wrapper, config.sideboardHeader.text, config.sideboardHeader, 'zone-header');
            addZone(wrapper, 'Main List', config.mainDeck, 'zone-main');
            addZone(wrapper, 'Sideboard List', config.sideboard, 'zone-sideboard');
            
            // Add sample text lines
            addMTGOTextLines(wrapper, config.mainDeck, config.lineHeight, 5);
            addMTGOTextLines(wrapper, config.sideboard, config.lineHeight, 3);
        }

        function addZone(wrapper, label, zone, className, isSmall = false) {
            const div = document.createElement('div');
            div.className = `zone-overlay ${className}`;
            div.style.cssText = `
                left: ${zone.x * 100}%;
                top: ${zone.y * 100}%;
                width: ${zone.width * 100}%;
                height: ${zone.height * 100}%;
            `;
            if (!isSmall) {
                div.textContent = label;
            }
            div.onclick = () => showZoneInfo(label || 'Card', zone);
            wrapper.appendChild(div);
        }

        function addMTGOTextLines(wrapper, zone, lineHeight, count) {
            for (let i = 0; i < count; i++) {
                const line = document.createElement('div');
                line.style.cssText = `
                    position: absolute;
                    left: ${zone.x * 100}%;
                    top: ${(zone.y + i * lineHeight) * 100}%;
                    width: ${zone.width * 100}%;
                    height: ${lineHeight * 100}%;
                    background: rgba(0,0,0,0.05);
                    border-left: 2px solid rgba(0,0,0,0.1);
                    padding-left: 5px;
                    font-size: 0.7rem;
                    color: #333;
                    display: flex;
                    align-items: center;
                `;
                line.textContent = `${i+1} Sample Card Name`;
                wrapper.appendChild(line);
            }
        }

        function addGrid(wrapper) {
            const gridOverlay = document.createElement('div');
            gridOverlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: 
                    repeating-linear-gradient(0deg, rgba(255,255,255,0.1) 0px, transparent 1px, transparent 10%, rgba(255,255,255,0.1) calc(10% + 1px)),
                    repeating-linear-gradient(90deg, rgba(255,255,255,0.1) 0px, transparent 1px, transparent 10%, rgba(255,255,255,0.1) calc(10% + 1px));
                pointer-events: none;
            `;
            wrapper.appendChild(gridOverlay);
        }

        function toggleGrid() {
            showGrid = document.getElementById('showGrid').checked;
            updateTemplate();
        }

        function showZoneInfo(label, zone) {
            alert(`Zone: ${label}\nPosition: ${(zone.x * 100).toFixed(1)}%, ${(zone.y * 100).toFixed(1)}%\nSize: ${(zone.width * 100).toFixed(1)}% x ${(zone.height * 100).toFixed(1)}%`);
        }

        function updateZoneDetails(platform, config) {
            const detailsDiv = document.getElementById('zone-details');
            detailsDiv.innerHTML = '';
            
            const zones = platform === 'mtga' 
                ? ['mainDeck', 'sideboard', 'header']
                : ['mainDeck', 'sideboard', 'deckHeader', 'sideboardHeader'];
            
            zones.forEach(zoneName => {
                if (!config[zoneName]) return;
                
                const zone = config[zoneName];
                const item = document.createElement('div');
                item.className = `zone-item ${zoneName.includes('side') ? 'sideboard' : zoneName.includes('header') ? 'header' : 'main'}`;
                
                const name = zoneName.replace(/([A-Z])/g, ' $1').trim();
                item.innerHTML = `
                    <strong>${name}</strong>
                    <div class="coordinates">
                        X: ${(zone.x * 100).toFixed(1)}% | Y: ${(zone.y * 100).toFixed(1)}%<br>
                        W: ${(zone.width * 100).toFixed(1)}% | H: ${(zone.height * 100).toFixed(1)}%
                        ${zone.rows ? `<br>Grid: ${zone.rows}x${zone.cols}` : ''}
                        ${zone.type ? `<br>Type: ${zone.type}` : ''}
                    </div>
                `;
                detailsDiv.appendChild(item);
            });
        }

        function exportConfig() {
            if (!currentConfig) return;
            
            const config = {
                platform: currentConfig.platform,
                resolution: currentConfig.resolution,
                zones: {},
                detection: {
                    confidence_threshold: 0.7,
                    preprocessing: {
                        enhance_contrast: true,
                        denoise: true,
                        sharpen: true
                    }
                }
            };
            
            // Copy zone data
            Object.keys(currentConfig).forEach(key => {
                if (key !== 'platform' && key !== 'resolution') {
                    config.zones[key] = currentConfig[key];
                }
            });
            
            // Add platform-specific detection rules
            if (currentConfig.platform === 'mtga') {
                config.detection.patterns = {
                    card_border: 'rounded',
                    background: 'dark_gradient',
                    layout: 'grid'
                };
            } else {
                config.detection.patterns = {
                    text_format: 'list',
                    separator: 'space',
                    columns: currentConfig.columnFormat || []
                };
            }
            
            updateExportContent(JSON.stringify(config, null, 2));
        }

        function updateExportContent(content) {
            if (!content && currentConfig) {
                exportConfig();
                return;
            }
            if (content) {
                document.getElementById('export-content').textContent = content;
            }
        }

        function copyToClipboard() {
            const content = document.getElementById('export-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('Configuration copied to clipboard!');
            });
        }

        // Initialize on load
        window.onload = () => {
            updateTemplate();
        };
    </script>
</body>
</html>